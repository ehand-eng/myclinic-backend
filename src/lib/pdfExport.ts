import jsPDF from 'jspdf';\nimport 'jspdf-autotable';\n\ninterface BookingData {\n  id: string;\n  timeSlot: string;\n  patientName: string;\n  patientPhone: string;\n  status: string;\n  doctorName: string;\n  dispensaryName: string;\n  bookingDate: string;\n  checkedInTime?: string;\n  completedTime?: string;\n}\n\ninterface ReportSummary {\n  total: number;\n  completed: number;\n  cancelled: number;\n  noShow: number;\n  bookings: BookingData[];\n}\n\ninterface ExportOptions {\n  title: string;\n  dateRange?: string;\n  dispensary?: string;\n  doctor?: string;\n  timeSlot?: string;\n  currentUser?: any;\n}\n\nexport const exportDailyReportToPDF = (\n  reportData: ReportSummary,\n  options: ExportOptions\n) => {\n  const doc = new jsPDF();\n  const pageWidth = doc.internal.pageSize.width;\n  const margin = 20;\n  \n  // Header\n  doc.setFontSize(20);\n  doc.setFont('helvetica', 'bold');\n  doc.text(options.title, pageWidth / 2, 20, { align: 'center' });\n  \n  // Report Info\n  doc.setFontSize(12);\n  doc.setFont('helvetica', 'normal');\n  let yPos = 35;\n  \n  doc.text(`Generated on: ${new Date().toLocaleDateString()}`, margin, yPos);\n  yPos += 7;\n  doc.text(`Generated by: ${options.currentUser?.name || 'Unknown'}`, margin, yPos);\n  yPos += 7;\n  \n  if (options.dateRange) {\n    doc.text(`Date: ${options.dateRange}`, margin, yPos);\n    yPos += 7;\n  }\n  \n  if (options.dispensary) {\n    doc.text(`Dispensary: ${options.dispensary}`, margin, yPos);\n    yPos += 7;\n  }\n  \n  if (options.doctor) {\n    doc.text(`Doctor: ${options.doctor}`, margin, yPos);\n    yPos += 7;\n  }\n  \n  if (options.timeSlot) {\n    doc.text(`Time Slot: ${options.timeSlot}`, margin, yPos);\n    yPos += 7;\n  }\n  \n  yPos += 10;\n  \n  // Summary\n  doc.setFont('helvetica', 'bold');\n  doc.text('Summary', margin, yPos);\n  yPos += 10;\n  \n  doc.setFont('helvetica', 'normal');\n  doc.text(`Total Bookings: ${reportData.total}`, margin, yPos);\n  doc.text(`Completed: ${reportData.completed}`, margin + 80, yPos);\n  yPos += 7;\n  doc.text(`Cancelled: ${reportData.cancelled}`, margin, yPos);\n  doc.text(`No Show: ${reportData.noShow}`, margin + 80, yPos);\n  yPos += 15;\n  \n  // Bookings Table\n  if (reportData.bookings.length > 0) {\n    doc.setFont('helvetica', 'bold');\n    doc.text('Booking Details', margin, yPos);\n    yPos += 10;\n    \n    const tableData = reportData.bookings.map((booking) => [\n      booking.timeSlot,\n      booking.patientName,\n      booking.patientPhone,\n      booking.doctorName,\n      booking.status\n    ]);\n    \n    (doc as any).autoTable({\n      head: [['Time Slot', 'Patient Name', 'Phone', 'Doctor', 'Status']],\n      body: tableData,\n      startY: yPos,\n      margin: { left: margin, right: margin },\n      styles: {\n        fontSize: 10,\n        cellPadding: 3\n      },\n      headStyles: {\n        fillColor: [66, 139, 202],\n        textColor: 255,\n        fontStyle: 'bold'\n      },\n      columnStyles: {\n        0: { cellWidth: 25 },\n        1: { cellWidth: 40 },\n        2: { cellWidth: 30 },\n        3: { cellWidth: 40 },\n        4: { cellWidth: 25 }\n      }\n    });\n  }\n  \n  // Save the PDF\n  const fileName = `${options.title.replace(/\\s+/g, '_')}_${new Date().toISOString().split('T')[0]}.pdf`;\n  doc.save(fileName);\n};\n\nexport const exportAdvancedReportToPDF = (\n  reportData: ReportSummary,\n  options: ExportOptions\n) => {\n  const doc = new jsPDF();\n  const pageWidth = doc.internal.pageSize.width;\n  const margin = 20;\n  \n  // Header\n  doc.setFontSize(20);\n  doc.setFont('helvetica', 'bold');\n  doc.text(options.title, pageWidth / 2, 20, { align: 'center' });\n  \n  // Report Info\n  doc.setFontSize(12);\n  doc.setFont('helvetica', 'normal');\n  let yPos = 35;\n  \n  doc.text(`Generated on: ${new Date().toLocaleDateString()}`, margin, yPos);\n  yPos += 7;\n  doc.text(`Generated by: ${options.currentUser?.name || 'Unknown'}`, margin, yPos);\n  yPos += 7;\n  \n  if (options.dateRange) {\n    doc.text(`Date Range: ${options.dateRange}`, margin, yPos);\n    yPos += 7;\n  }\n  \n  if (options.dispensary) {\n    doc.text(`Dispensary: ${options.dispensary}`, margin, yPos);\n    yPos += 7;\n  }\n  \n  if (options.doctor) {\n    doc.text(`Doctor: ${options.doctor}`, margin, yPos);\n    yPos += 7;\n  }\n  \n  if (options.timeSlot) {\n    doc.text(`Time Slot: ${options.timeSlot}`, margin, yPos);\n    yPos += 7;\n  }\n  \n  yPos += 10;\n  \n  // Summary with percentages\n  doc.setFont('helvetica', 'bold');\n  doc.text('Summary', margin, yPos);\n  yPos += 10;\n  \n  doc.setFont('helvetica', 'normal');\n  const completionRate = reportData.total > 0 ? Math.round((reportData.completed / reportData.total) * 100) : 0;\n  const cancellationRate = reportData.total > 0 ? Math.round((reportData.cancelled / reportData.total) * 100) : 0;\n  const noShowRate = reportData.total > 0 ? Math.round((reportData.noShow / reportData.total) * 100) : 0;\n  \n  doc.text(`Total Bookings: ${reportData.total}`, margin, yPos);\n  yPos += 7;\n  doc.text(`Completed: ${reportData.completed} (${completionRate}%)`, margin, yPos);\n  yPos += 7;\n  doc.text(`Cancelled: ${reportData.cancelled} (${cancellationRate}%)`, margin, yPos);\n  yPos += 7;\n  doc.text(`No Show: ${reportData.noShow} (${noShowRate}%)`, margin, yPos);\n  yPos += 15;\n  \n  // Bookings Table\n  if (reportData.bookings.length > 0) {\n    doc.setFont('helvetica', 'bold');\n    doc.text('Booking Details', margin, yPos);\n    yPos += 10;\n    \n    const tableData = reportData.bookings.map((booking) => [\n      new Date(booking.bookingDate).toLocaleDateString(),\n      booking.timeSlot,\n      booking.patientName,\n      booking.patientPhone,\n      booking.doctorName,\n      booking.dispensaryName,\n      booking.status\n    ]);\n    \n    (doc as any).autoTable({\n      head: [['Date', 'Time', 'Patient', 'Phone', 'Doctor', 'Dispensary', 'Status']],\n      body: tableData,\n      startY: yPos,\n      margin: { left: margin, right: margin },\n      styles: {\n        fontSize: 9,\n        cellPadding: 2\n      },\n      headStyles: {\n        fillColor: [66, 139, 202],\n        textColor: 255,\n        fontStyle: 'bold'\n      },\n      columnStyles: {\n        0: { cellWidth: 22 },\n        1: { cellWidth: 20 },\n        2: { cellWidth: 30 },\n        3: { cellWidth: 25 },\n        4: { cellWidth: 30 },\n        5: { cellWidth: 30 },\n        6: { cellWidth: 20 }\n      }\n    });\n  }\n  \n  // Save the PDF\n  const fileName = `${options.title.replace(/\\s+/g, '_')}_${new Date().toISOString().split('T')[0]}.pdf`;\n  doc.save(fileName);\n};